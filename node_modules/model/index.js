var orders = require('./data/orders.json');
var processes = require('./data/processing.json');

var processLastId = (function () {
  var max = 0;
  for (var i in processes) {
    max = processes[i].id > max ? processes[i].id : max;
  }
  return max;
})();

// Public
module.exports = {
  getOrders: function () {
    return orders;
  },
  getOrderProcesses: function (orderId) {
    return processes.filter(function (process) {
      return parseInt(process.orderId) === parseInt(orderId);
	});
  },
  insertOrderProcess: function (orderId) {
    processes.push({
      id: ++processLastId,
      orderId: orderId,
      processed: 1
    });
    return {
      status: 1,
      message: "success",
	  id: processLastId
    };
  }
}
